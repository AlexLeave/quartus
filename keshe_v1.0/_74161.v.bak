//实现74161 16进制计数
module _74161(CP, Rd, LD, EP, ET, D, Q, C);

//定义输入输出
input Rd, LD, EP, ET;
input CP;//clock
input[3:0] D;
output[3:0] Q;
output C;//进位

reg out_Q;
//设计电路
always @(posedge CP or Rd or LD or EP or ET)
begin
	
	case({Rd, LD, EP, ET})
	
	4'b0xxx: out_Q <= 4'b0000;
	4'b10xx: out_Q <= D;//可能有错
	4'b1101: out_Q <= Q;//保持
	4'b11x0: out_Q <= Q; C <= 1'b0;
	//计数
	4'b1111: begin 
				
				if(CP) out_Q <= Q + 4'b0001;
				else ;
	
				end
	
	endcase
	
end
assign Q = out_Q; 
if(out_Q == 4'b1111 && {Rd, LD, EP, ET} != 4'b11x0) C <= 1'b1;
else C <= 1'b0;
endmodule
